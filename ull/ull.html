<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn Big Things !!</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tiro+Bangla:ital@0;1&display=swap" rel="stylesheet">

    <style>
        /* --- ‡¶®‡¶§‡ßÅ‡¶®: ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤ (‡¶≤‡¶æ‡¶á‡¶ü ‡¶ì ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶°) --- */
        :root {
            --bg-gradient-start: #e6fffa;
            --bg-gradient-end: #f0f7f4;
            --container-bg: rgba(255, 255, 255, 0.9);
            --surface-bg: #e6fffa;
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --border-color: #cbd5e0;
            --primary-accent: #38b2ac;
            --secondary-accent: #2c7a7b;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --locked-bg: #e2e8f0;
            --danger-color: #e53e3e;
            --success-color: #38a169;
            --warning-bg: #fefcbf;
            --warning-border: #f6e05e;
            --code-bg: #2d3748;
            --code-text: #f7fafc;
        }

        body.dark-mode {
            --bg-gradient-start: #1a202c;
            --bg-gradient-end: #2d3748;
            --container-bg: rgba(45, 55, 72, 0.8);
            --surface-bg: #2d3748;
            --text-primary: #e2e8f0;
            --text-secondary: #a0aec0;
            --border-color: #4a5568;
            --primary-accent: #4fd1c5;
            --secondary-accent: #38b2ac;
            --shadow-color: rgba(0, 0, 0, 0.4);
            --locked-bg: #4a5568;
            --danger-color: #f56565;
            --success-color: #68d391;
            --warning-bg: #4a4a28;
            --warning-border: #b7791f;
            --code-bg: #1a202c;
            --code-text: #e2e8f0;
        }

        body {
            font-family: 'Tiro Bangla', serif;
            background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end));
            color: var(--text-primary);
            margin: 0;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            background-color: var(--container-bg);
            border-radius: 20px;
            box-shadow: 0 15px 30px var(--shadow-color);
            padding: 30px 40px;
            text-align: center;
            margin: 40px auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            /* ‡¶®‡¶§‡ßÅ‡¶®: ‡¶ó‡ßç‡¶≤‡¶æ‡¶∏ ‡¶á‡¶´‡ßá‡¶ï‡ßç‡¶ü */
            transition: background-color 0.3s;
        }

        h1 {
            font-size: 3em;
            font-weight: bold;
            background: linear-gradient(45deg, #f687b3, #b794f4, #63b3ed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
            margin-bottom: 10px;
        }

        #level-tracker {
            background-color: var(--secondary-accent);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .main-layout {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-top: 30px;
        }

        .main-content,
        .sidebar-content {
            width: 100%;
        }

        .sidebar-content h3 {
            color: var(--primary-accent);
            border-bottom: 2px solid var(--primary-accent);
            padding-bottom: 10px;
        }

        .locked-levels-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .locked-levels-list::-webkit-scrollbar {
            width: 8px;
        }

        .locked-levels-list::-webkit-scrollbar-track {
            background: transparent;
        }

        .locked-levels-list::-webkit-scrollbar-thumb {
            background: var(--primary-accent);
            border-radius: 10px;
        }

        .locked-list-item {
            background-color: var(--locked-bg);
            border: 1px solid var(--border-color);
            padding: 15px;
            border-radius: 8px;
            text-align: left;
            font-size: 1.1em;
            color: var(--text-primary);
            transition: transform 0.2s, background-color 0.3s;
        }

        .locked-list-item:hover {
            transform: translateX(5px);
        }

        @media (min-width: 992px) {
            .main-layout {
                flex-direction: row;
                align-items: flex-start;
            }

            .main-content {
                flex: 3;
            }

            .sidebar-content {
                flex: 1;
                position: sticky;
                top: 20px;
            }
        }

        .level {
            background-color: var(--surface-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 25px;
            width: 100%;
            box-sizing: border-box;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .level h2 {
            color: var(--text-primary);
            border-bottom: 2px dashed var(--border-color);
            padding-bottom: 10px;
            margin-top: 0;
        }

        .concept {
            background-color: var(--container-bg);
            padding: 15px;
            border-radius: 8px;
            border-left: 5px solid var(--primary-accent);
            text-align: left;
            margin: 20px 0;
        }

        .code-block {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 15px;
            border-radius: 5px;
            text-align: left;
            font-family: 'Courier New', Courier, monospace;
            white-space: pre-wrap;
        }

        .task {
            margin-top: 25px;
            padding: 15px;
            background-color: var(--warning-bg);
            border: 1px solid var(--warning-border);
            border-radius: 8px;
        }

        input[type="text"],
        textarea {
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: 'Tiro Bangla', serif;
            font-size: 1em;
            width: 100%;
            box-sizing: border-box;
            background-color: var(--surface-bg);
            color: var(--text-primary);
            transition: all 0.3s;
        }

        input[type="text"]:focus,
        textarea:focus {
            border-color: var(--primary-accent);
            outline: none;
            background-color: var(--container-bg);
        }

        button {
            background: linear-gradient(45deg, var(--secondary-accent), var(--primary-accent));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-family: 'Tiro Bangla', serif;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px var(--shadow-color);
        }

        button:disabled {
            background: var(--locked-bg);
            color: var(--text-secondary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .feedback {
            margin-top: 15px;
            font-size: 1.2em;
            font-weight: bold;
            min-height: 25px;
        }

        .feedback.correct {
            color: var(--success-color);
        }

        .feedback.incorrect {
            color: var(--danger-color);
        }

        .hint-box {
            margin-top: 20px;
            padding: 10px;
            background-color: transparent;
            border: 1px dashed var(--border-color);
            border-radius: 5px;
            cursor: pointer;
        }

        .hint-box .hint-text {
            display: none;
            margin-top: 8px;
            color: var(--success-color);
            text-align: left;
        }

        .level-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        /* --- ‡¶®‡¶§‡ßÅ‡¶®: ‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶°‡¶æ‡¶®‡¶¶‡¶ø‡¶ï‡ßá‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶Ü‡¶á‡¶ï‡¶® --- */
        .top-right-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        #settings-icon,
        #theme-toggle {
            width: 50px;
            height: 50px;
            background-color: var(--container-bg);
            color: var(--text-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px var(--shadow-color);
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }

        #settings-icon:hover,
        #theme-toggle:hover {
            transform: scale(1.1) rotate(20deg);
        }

        /* --- ‡¶Æ‡ßã‡¶°‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (‡¶™‡¶™-‡¶Ü‡¶™) --- */
        #level-editor-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 999;
            display: none;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
        }

        .modal-content {
            background-color: var(--container-bg);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            color: var(--text-primary);
        }

        .modal-content h2 {
            margin-top: 0;
            color: var(--primary-accent);
        }

        .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .modal-buttons {
            text-align: right;
            margin-top: 20px;
        }

        .modal-buttons button {
            margin-left: 10px;
        }

        #level-management-list {
            list-style: none;
            padding: 0;
        }

        #level-management-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        #level-management-list li:last-child {
            border-bottom: none;
        }

        #level-management-list .level-title {
            font-weight: bold;
        }

        #level-management-list .actions button {
            padding: 6px 12px;
            font-size: 0.9em;
            margin-top: 0;
        }

        #level-management-list .actions .delete-btn {
            background: var(--danger-color);
        }

        #add-new-level-btn {
            display: block;
            width: 100%;
            margin-top: 20px;
        }

        #level-form-container {
            display: none;
        }
    </style>
</head>

<body>

    <div class="top-right-controls">
        <div id="theme-toggle" title="‡¶•‡¶ø‡¶Æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®">üåô</div>
        <div id="settings-icon" title="‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü">‚öôÔ∏è</div>
    </div>

    <div class="container">
        <h1>‡¶ú‡¶æ‡¶≠‡¶æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶≠‡ßá‡¶û‡ßç‡¶ö‡¶æ‡¶∞</h1>
        <div id="level-tracker"></div>

        <div class="main-layout">
            <div class="main-content" id="active-level-container"></div>
            <div class="sidebar-content" id="locked-levels-sidebar"></div>
        </div>

        <div class="level-navigation">
            <button id="prev-level-btn">‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤</button>
            <button id="next-level-btn">‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤</button>
        </div>
    </div>

    <div id="level-editor-modal">
        <div class="modal-content">
            <div id="level-list-container">
                <h2 id="modal-title">‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</h2>
                <ul id="level-management-list"></ul>
                <button type="button" id="add-new-level-btn">‚ûï ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <div class="modal-buttons"><button type="button" id="close-modal-list-btn">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button></div>
            </div>

            <div id="level-form-container">
                <h2 id="modal-form-title">‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
                <input type="hidden" id="editing-level-index">
                <div class="form-group"> <label for="level-title">‡¶≤‡ßá‡¶≠‡ßá‡¶≤‡ßá‡¶∞ ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤</label> <input type="text"
                        id="level-title" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡ß¨: ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá ‡¶Æ‡ßá‡¶•‡¶°"> </div>
                <div class="form-group"> <label for="level-story">‡¶ó‡¶≤‡ßç‡¶™/‡¶ß‡¶æ‡¶∞‡¶£‡¶æ</label> <textarea id="level-story"
                        rows="3"></textarea> </div>
                <div class="form-group"> <label for="level-challenge">‡¶ö‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶û‡ßç‡¶ú</label> <textarea id="level-challenge"
                        rows="3"></textarea> </div>
                <div class="form-group"> <label for="level-snippet">‡¶ï‡ßã‡¶° ‡¶∏‡ßç‡¶®‡¶ø‡¶™‡ßá‡¶ü</label> <input type="text"
                        id="level-snippet" placeholder="var data = {{input}};"> <small>‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏‡ßá‡¶∞ ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ‡¶Ø‡¶º `{{input}}`
                        ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</small> </div>
                <div class="form-group"> <label for="level-hint">‡¶π‡¶ø‡¶®‡ßç‡¶ü</label> <textarea id="level-hint"
                        rows="2"></textarea> </div>
                <div class="form-group"> <label for="level-answer">‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞</label> <input type="text"
                        id="level-answer"> </div>
                <div class="modal-buttons"> <button type="button" id="close-modal-form-btn">‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</button> <button
                        type="button" id="save-level-btn">‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button> </div>
            </div>
        </div>
    </div>

    <script>
        // ‡¶è‡¶á ‡¶Ö‡¶Ç‡¶∂‡¶ü‡¶ø ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ ‡¶Ü‡¶õ‡ßá
        const defaultLevels = [
            { title: "‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡ßß: ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤ (Variable)", story: "<p>‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡¶ø‡¶Ç-‡¶è <strong>‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤ (Variable)</strong> ‡¶π‡¶≤‡ßã ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞, ‡¶Ø‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶¨‡¶æ ‡¶§‡¶•‡ßç‡¶Ø ‡¶ú‡¶Æ‡¶æ ‡¶∞‡¶æ‡¶ñ‡¶ø‡•§</p>", challenge: "‡¶®‡¶ø‡¶ö‡ßá‡¶∞ `fruitBox` ‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ï‡ßç‡¶∏‡ßá '‡¶Ü‡¶Æ' ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶π‡¶≤‡ßá ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ‡¶Ø‡¶º ‡¶ï‡ßÄ ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶π‡¶¨‡ßá?", codeSnippet: 'var fruitBox = "{{input}}";', hint: "‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡ßá‡¶ñ‡¶æ‡¶ï‡ßá ‡¶ï‡ßã‡¶ü‡ßá‡¶∂‡¶® (' ') ‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶π‡¶Ø‡¶º‡•§", answer: "‡¶Ü‡¶Æ" },
            { title: "‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡ß®: ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ (Number)", story: "<p>‡¶¨‡¶æ‡¶ï‡ßç‡¶∏‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶ì ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø‡•§ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶∞‡¶æ‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶ü‡ßá‡¶∂‡¶® (' ') ‡¶¶‡¶ø‡¶§‡ßá ‡¶π‡¶Ø‡¶º ‡¶®‡¶æ‡•§</p>", challenge: "‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá <strong>10</strong> ‡¶ü‡¶ø ‡¶ö‡¶ï‡¶≤‡ßá‡¶ü ‡¶Ü‡¶õ‡ßá‡•§ `chocolates` ‡¶¨‡¶æ‡¶ï‡ßç‡¶∏‡ßá ‡¶∏‡ßá‡¶á ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø ‡¶∞‡¶æ‡¶ñ‡ßã‡•§", codeSnippet: "var chocolates = {{input}};", hint: "‡¶Ø‡ßá‡¶π‡ßá‡¶§‡ßÅ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶∞‡¶æ‡¶ñ‡¶õ‡¶ø, ‡¶ï‡ßã‡¶ü‡ßá‡¶∂‡¶® (' ') ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§", answer: "10" },
            { title: "‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡ß©: ‡¶≤‡ßá‡¶ñ‡¶æ (String)", story: "<p>‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡ßá‡¶ñ‡¶æ‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡¶ø‡¶Ç ‡¶è‡¶∞ ‡¶≠‡¶æ‡¶∑‡¶æ‡¶Ø‡¶º <strong>‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç (String)</strong> ‡¶¨‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡•§</p>", challenge: "`countryName` ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤‡ßá '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂' ‡¶≤‡ßá‡¶ñ‡¶æ‡¶ü‡¶ø ‡¶∏‡ßç‡¶ü‡ßã‡¶∞ ‡¶ï‡¶∞‡ßã‡•§", codeSnippet: 'var countryName = "{{input}}";', hint: "‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡ßá‡¶ñ‡¶æ‡¶ï‡ßá ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶π‡¶≤‡ßá ‡¶∏‡ßá‡¶ü‡¶ø‡¶ï‡ßá ‡¶ï‡ßã‡¶ü‡ßá‡¶∂‡¶® (' ') ‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶π‡¶Ø‡¶º‡•§", answer: "‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂" },
            { title: "‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡ß™: ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ (+)", story: "<p>‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶ú‡¶ü‡¶ø `+` ‡¶ö‡¶ø‡¶π‡ßç‡¶® (‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶∞) ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡•§</p>", challenge: "`apples` ‡¶ì `oranges` ‡¶è‡¶∞ ‡¶Ø‡ßã‡¶ó‡¶´‡¶≤ ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ‡¶Ø‡¶º ‡¶ï‡ßã‡¶® ‡¶ö‡¶ø‡¶π‡ßç‡¶®‡¶ü‡¶ø ‡¶¨‡¶∏‡¶¨‡ßá?", codeSnippet: "var apples = 5;<br>var oranges = 3;<br>var totalFruits = apples {{input}} oranges;", hint: "‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶ï‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø `+` (‡¶™‡ßç‡¶≤‡¶æ‡¶∏) ‡¶ö‡¶ø‡¶π‡ßç‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡•§", answer: "+" },
            { title: "‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡ß´: ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá (Array)", story: "<p>‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤‡ßá ‡¶Ö‡¶®‡ßá‡¶ï‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ú‡¶ø‡¶®‡¶ø‡¶∏ ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶π‡¶≤‡ßá <strong>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá (Array)</strong> ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡•§</p>", challenge: "`fruits` ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶§‡ßá '‡¶≤‡¶ø‡¶ö‡ßÅ' ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ‡¶Ø‡¶º ‡¶ï‡ßÄ ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶π‡¶¨‡ßá?", codeSnippet: "var fruits = ['‡¶Ü‡¶Æ', '‡¶ú‡¶æ‡¶Æ', {{input}}];", hint: "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡¶ï‡ßá ‡¶ï‡¶Æ‡¶æ (,) ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡•§", answer: "'‡¶≤‡¶ø‡¶ö‡ßÅ'" }
        ];
        let levelsData = [];
        let progress = 1;
        let activeLevelIndex = 0;
        const activeContainer = document.getElementById('active-level-container');
        const sidebarContainer = document.getElementById('locked-levels-sidebar');
        const modal = document.getElementById('level-editor-modal');
        const levelListContainer = document.getElementById('level-list-container');
        const levelFormContainer = document.getElementById('level-form-container');
        function loadData() {
            const savedData = localStorage.getItem('jsGameLevels');
            const savedProgress = localStorage.getItem('jsGameProgress');
            levelsData = savedData ? JSON.parse(savedData) : [...defaultLevels];
            if (levelsData.length === 0) { levelsData = [...defaultLevels]; }
            progress = savedProgress ? parseInt(savedProgress) : 1;
            if (progress > levelsData.length + 1) progress = 1;
            activeLevelIndex = Math.max(0, Math.min(progress - 1, levelsData.length - 1));
        }
        function saveData() {
            localStorage.setItem('jsGameLevels', JSON.stringify(levelsData));
            localStorage.setItem('jsGameProgress', progress.toString());
        }
        function renderUI() {
            if (levelsData.length > 0) {
                renderActiveLevel();
                renderSidebar();
                updateLevelTracker();
                updateNavigationButtons();
            } else {
                activeContainer.innerHTML = '<h2>‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§</h2><p>‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>';
                sidebarContainer.innerHTML = '';
                document.getElementById('level-tracker').textContent = '‡¶≤‡ßá‡¶≠‡ßá‡¶≤: ‡ß¶ / ‡ß¶';
                document.getElementById('prev-level-btn').disabled = true;
                document.getElementById('next-level-btn').disabled = true;
            }
        }
        function renderActiveLevel() {
            activeContainer.innerHTML = '';
            if (activeLevelIndex >= levelsData.length || activeLevelIndex < 0) return;
            const levelData = levelsData[activeLevelIndex];
            const levelWrapper = document.createElement('div');
            levelWrapper.className = 'level';
            levelWrapper.id = `level-div-${activeLevelIndex}`;
            const inputHTML = `<input type="text" id="level-input-${activeLevelIndex}" placeholder="‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶®">`;
            const finalCodeSnippet = levelData.codeSnippet.replace('{{input}}', inputHTML);
            levelWrapper.innerHTML = `<h2>${levelData.title}</h2><div class="content"><div class="concept">${levelData.story}</div><div class="task"><h3>‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶û‡ßç‡¶ú!</h3><p>${levelData.challenge}</p><div class="code-block">${finalCodeSnippet}</div><button onclick="checkAnswer(${activeLevelIndex})">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßã</button><div class="feedback" id="feedback-${activeLevelIndex}"></div><div class="hint-box" onclick="toggleHint(this)"><span>üí° ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶≤‡¶æ‡¶ó‡¶¨‡ßá? (‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ì/‡¶≤‡ßÅ‡¶ï‡¶æ‡¶ì)</span><div class="hint-text">${levelData.hint}</div></div></div></div>`;
            activeContainer.appendChild(levelWrapper);
        }
        function renderSidebar() {
            sidebarContainer.innerHTML = '<h3>‡¶¨‡¶®‡ßç‡¶ß ‡¶•‡¶æ‡¶ï‡¶æ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤‡¶∏‡¶Æ‡ßÇ‡¶π</h3><div class="locked-levels-list" id="locked-list"></div>';
            const lockedList = document.getElementById('locked-list');
            lockedList.innerHTML = '';
            let foundLocked = false;
            levelsData.forEach((levelData, index) => {
                if (index >= progress) {
                    const lockedItem = document.createElement('div');
                    lockedItem.className = 'locked-list-item';
                    lockedItem.innerHTML = `üîí ${levelData.title}`;
                    lockedList.appendChild(lockedItem);
                    foundLocked = true;
                }
            });
            if (!foundLocked) { lockedList.innerHTML = '<p>‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! üéâ</p>'; }
        }
        function toggleHint(hintBoxElement) {
            const hintText = hintBoxElement.querySelector('.hint-text');
            if (hintText) { hintText.style.display = (hintText.style.display === 'block') ? 'none' : 'block'; }
        }
        function updateLevelTracker() {
            const trackerElement = document.getElementById('level-tracker');
            if (trackerElement) { trackerElement.textContent = `‡¶≤‡ßá‡¶≠‡ßá‡¶≤: ${activeLevelIndex + 1} / ${levelsData.length}`; }
        }
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-level-btn');
            const nextBtn = document.getElementById('next-level-btn');
            prevBtn.disabled = activeLevelIndex === 0;
            nextBtn.disabled = activeLevelIndex >= progress - 1 || activeLevelIndex >= levelsData.length - 1;
        }
        function checkAnswer(levelIndex) {
            if (levelIndex !== activeLevelIndex) return;
            const userAnswer = document.getElementById(`level-input-${levelIndex}`).value.trim();
            const correctAnswer = levelsData[levelIndex].answer;
            const feedbackElement = document.getElementById(`feedback-${levelIndex}`);
            if (userAnswer === correctAnswer) {
                feedbackElement.textContent = '‡¶¶‡¶æ‡¶∞‡ßÅ‡¶£! ‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶ü‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï‡•§';
                feedbackElement.className = 'feedback correct';
                document.getElementById(`level-input-${levelIndex}`).disabled = true;
                document.querySelector(`#level-div-${levelIndex} .task button`).disabled = true;
                if (levelIndex + 1 === progress && progress < levelsData.length) {
                    progress++;
                    saveData();
                    renderSidebar();
                }
                updateNavigationButtons();
            } else {
                feedbackElement.textContent = '‡¶â‡¶π‡ßÅ, ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßã‡•§';
                feedbackElement.className = 'feedback incorrect';
            }
        }
        function goToLevel(direction) {
            if (direction === 'next' && activeLevelIndex < progress - 1) { activeLevelIndex++; }
            else if (direction === 'prev' && activeLevelIndex > 0) { activeLevelIndex--; }
            renderUI();
        }
        function renderLevelManagementList() {
            const listEl = document.getElementById('level-management-list');
            listEl.innerHTML = '';
            levelsData.forEach((level, index) => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `<span class="level-title">${level.title}</span><div class="actions"><button onclick="openEditorForEdit(${index})">‡¶è‡¶°‡¶ø‡¶ü</button><button class="delete-btn" onclick="deleteLevel(${index})">‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button></div>`;
                listEl.appendChild(listItem);
            });
            levelListContainer.style.display = 'block';
            levelFormContainer.style.display = 'none';
            modal.style.display = 'flex';
        }
        function openEditorForEdit(index = null) {
            levelListContainer.style.display = 'none';
            levelFormContainer.style.display = 'block';
            const formTitle = document.getElementById('modal-form-title');
            const indexInput = document.getElementById('editing-level-index');
            if (index !== null) {
                formTitle.textContent = `‡¶è‡¶°‡¶ø‡¶ü: ${levelsData[index].title}`;
                indexInput.value = index;
                document.getElementById('level-title').value = levelsData[index].title;
                document.getElementById('level-story').value = levelsData[index].story;
                document.getElementById('level-challenge').value = levelsData[index].challenge;
                document.getElementById('level-snippet').value = levelsData[index].codeSnippet;
                document.getElementById('level-hint').value = levelsData[index].hint;
                document.getElementById('level-answer').value = levelsData[index].answer;
            } else {
                formTitle.textContent = '‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®';
                indexInput.value = -1;
                document.getElementById('level-title').value = '';
                document.getElementById('level-story').value = '';
                document.getElementById('level-challenge').value = '';
                document.getElementById('level-snippet').value = 'var data = "{{input}}";';
                document.getElementById('level-hint').value = '';
                document.getElementById('level-answer').value = '';
            }
        }
        function saveLevel() {
            const index = parseInt(document.getElementById('editing-level-index').value);
            const title = document.getElementById('level-title').value.trim();
            const answer = document.getElementById('level-answer').value.trim();
            if (!title || !answer) { alert("‡¶≤‡ßá‡¶≠‡ßá‡¶≤‡ßá‡¶∞ ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶¶‡¶ø‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§"); return; }
            const levelData = {
                title: title, story: document.getElementById('level-story').value,
                challenge: document.getElementById('level-challenge').value,
                codeSnippet: document.getElementById('level-snippet').value || 'var data = "{{input}}";',
                hint: document.getElementById('level-hint').value, answer: answer
            };
            if (index === -1) { levelsData.push(levelData); }
            else { levelsData[index] = levelData; }
            saveData();
            loadData();
            renderUI();
            modal.style.display = 'none';
            alert('‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
        }
        function deleteLevel(index) {
            if (confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø "${levelsData[index].title}" ‡¶≤‡ßá‡¶≠‡ßá‡¶≤‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§?`)) {
                levelsData.splice(index, 1);
                saveData();
                loadData();
                renderUI();
                renderLevelManagementList();
                alert('‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            }
        }

        // --- ‡¶®‡¶§‡ßÅ‡¶®: ‡¶•‡¶ø‡¶Æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ---
        document.addEventListener('DOMContentLoaded', function () {
            const themeToggle = document.getElementById('theme-toggle');

            // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶•‡¶ø‡¶Æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = '‚òÄÔ∏è';
            }

            // ‡¶•‡¶ø‡¶Æ ‡¶ü‡¶ó‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                let theme = 'light';
                if (document.body.classList.contains('dark-mode')) {
                    themeToggle.textContent = '‚òÄÔ∏è';
                    theme = 'dark';
                } else {
                    themeToggle.textContent = 'üåô';
                }
                localStorage.setItem('theme', theme); // ‡¶•‡¶ø‡¶Æ‡ßá‡¶∞ ‡¶™‡¶õ‡¶®‡ßç‡¶¶ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
            });

            loadData();
            renderUI();

            document.getElementById('settings-icon').addEventListener('click', renderLevelManagementList);
            document.getElementById('close-modal-list-btn').addEventListener('click', () => { modal.style.display = 'none'; });
            document.getElementById('close-modal-form-btn').addEventListener('click', renderLevelManagementList);
            document.getElementById('add-new-level-btn').addEventListener('click', () => openEditorForEdit());
            document.getElementById('save-level-btn').addEventListener('click', saveLevel);
            document.getElementById('next-level-btn').addEventListener('click', () => goToLevel('next'));
            document.getElementById('prev-level-btn').addEventListener('click', () => goToLevel('prev'));
        });
    </script>
    <script>
        document.addEventListener('keydown', function (event) {
            // 'Escape' ‡¶¨‡¶æ 'Esc' ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
            if (event.key === "Escape") {
                // ‡¶è‡¶á ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶°‡¶ü‡¶ø ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá‡¶á ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡¶¨‡ßá
                window.location.href = "../aio.html";
            }
        });
    </script>
</body>

</html>